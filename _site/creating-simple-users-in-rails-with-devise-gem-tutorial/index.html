<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"> <title>Creating Simple Users in Rails with Devise Gem Tutorial &#8211; Mohammed Chisti</title> <meta name="description" content="Prerequisite: Ruby, Rails, Active Record CRUD"> <meta name="keywords" content="Rails, Gems, Mac"> <!-- Twitter Cards --> <meta name="twitter:card" content="summary"> <meta name="twitter:image" content="profile.jpg"> <meta name="twitter:title" content="Creating Simple Users in Rails with Devise Gem Tutorial"> <meta name="twitter:description" content="Prerequisite: Ruby, Rails, Active Record CRUD"> <meta name="twitter:site" content="@mohammedchisti"> <meta name="twitter:creator" content="@mohammedchisti"> <!-- Open Graph --> <meta property="og:locale" content="en_US"> <meta property="og:type" content="article"> <meta property="og:title" content="Creating Simple Users in Rails with Devise Gem Tutorial"> <meta property="og:description" content="Prerequisite: Ruby, Rails, Active Record CRUD"> <meta property="og:url" content="http://localhost:4000/creating-simple-users-in-rails-with-devise-gem-tutorial/"> <meta property="og:site_name" content="Mohammed Chisti"> <meta property="og:image" content="http://localhost:4000/images/profile.jpg"> <link rel="canonical" href="http://localhost:4000/creating-simple-users-in-rails-with-devise-gem-tutorial/"> <!-- Handheld --> <meta name="HandheldFriendly" content="True"> <meta name="MobileOptimized" content="320"> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Feed --> <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Mohammed Chisti" /> <!-- Favicons --> <link rel="shortcut icon" type="image/png" href="http://localhost:4000/favicon.png" /> <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" /> <!-- CSS --> <link rel="stylesheet" type="text/css" href="http://localhost:4000/assets/css/main.css"> <!-- Left Block Image for Posts --> <style type="text/css"> #posts.inner-post-page .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(http://localhost:4000/images/background.jpg) no-repeat;background-size: cover;} </style> <!-- Left Block Images for Home and Pages --> <style type="text/css"> #posts .block-left {background: linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(http://localhost:4000/images/background.jpg) no-repeat;background-size: cover, cover;} .block-left {background: linear-gradient(rgba(44,45,51,0.9), rgba(44,45,51,0.9)), url(http://localhost:4000/images/rainy-japan.jpg) no-repeat;background-size: cover;} </style> </head> <body id="posts" class="inner-post-page"> <div class="block-left"> <div class="content"> <a href="http://localhost:4000" class="logo"><img src="http://localhost:4000/images/profile.jpg"></a> <div class="post-title-section"> <div class="section-line">Posts <em>/</em></div> <h1 class="section-title">Creating Simple Users in Rails with Devise Gem Tutorial </h1> <ul class="tags"> <li><a href="http://localhost:4000/tags#Rails">Rails</a></li> <li><a href="http://localhost:4000/tags#Gems">Gems</a></li> <li><a href="http://localhost:4000/tags#Mac">Mac</a></li> </ul> <div class="section-line reverse"><a href="http://localhost:4000/posts">Back to posts</a> <em>/</em></div> </div> </div> </div> <div class="block-right"> <div class="share-buttons"> <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/creating-simple-users-in-rails-with-devise-gem-tutorial/" class="btn btn_twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/creating-simple-users-in-rails-with-devise-gem-tutorial/" class="btn btn_facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://plus.google.com/share?url=http://localhost:4000/creating-simple-users-in-rails-with-devise-gem-tutorial/" class="btn btn_google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a> </div> <a href="../posts.html" title="posts" class="posts-menu-icon"></a> <a title="projects" class="projects-menu-icon"> <span></span> </a> <div class="inner-post content"> <div class="date-highlight">02 Jan 2017</div> <p>Prerequisite: Ruby, Rails, Active Record CRUD</p> <p>When you finally get Ruby, understand a bit of Rails and start writing small websites with RESTful &amp; CRUD conventions, you start to feel pretty good that you can show something off. Though that showcase still doesn’t feel very personal to someone just yet, until they start to make their own profile.</p> <p>Here’s a tutorial using the Devise gem doing just that. We’ll make a simple blog app. We won’t be making the entire blog app in part I but will complete it in Part II. I would like us to focus just on how to create the profile, not the blog for this part. So instead we’ll kind of cut the blog short so that when someone logs in, it just displays a welcome index page with their e-mail they signed up with displayed. This way you can have a full user profile and have a platform for a full website if you’d like. In part II we’ll complete the blog and focus on how to make our blog unique to our individual user. Lets get started.</p> <h2 id="setting-up-devise-gem-and-creating-a-user">Setting Up Devise Gem and Creating a User</h2> <p>Go to the directory where you want to have this project created and open terminal, then type :</p> <div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>rails new simple-user-profile
</code></pre></div> <p>Now add the Devise gem to the Gemfile :</p> <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">gem</span> <span class="s1">'devise'</span>
</code></pre></div> <p>Then the following in our terminal :</p> <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="c1"># -- Install devise gem</span>
<span class="err">$</span> <span class="n">bundle</span>
<span class="err">$</span> <span class="n">rails</span> <span class="n">g</span> <span class="n">devise</span><span class="ss">:install</span>

<span class="c1"># -- creates devise User model</span>
<span class="err">$</span> <span class="n">rails</span> <span class="n">g</span> <span class="n">devise</span> <span class="no">User</span>
</code></pre></div> <p>In terminal you’ll see a set of instructions from the devise gem. We only have to add the following line of code to the <code class="highlighter-rouge">config/environments/development.rb</code> path :</p> <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">config</span><span class="p">.</span><span class="nf">action_mailer</span><span class="p">.</span><span class="nf">default_url_options</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">host: </span><span class="s1">'localhost'</span><span class="p">,</span> <span class="ss">port: </span><span class="mi">3000</span> <span class="p">}</span>
</code></pre></div> <p>Migrate the database :</p> <div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>rake db:migrate
</code></pre></div> <p>At this point you actually have a devise user profile and log in. If you’d like to try it out, start the rails server with :</p> <div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>rails s
</code></pre></div> <p>Then go to <code class="highlighter-rouge">localhost:3000/users/sign_up</code> in your browser to see the sign in. It should automatically display the Ruby on Rails page. Lets change that into our index page next.</p> <h2 id="displaying-a-welcome-index-page">Displaying a Welcome Index Page</h2> <p>Now that we have our Devise gem working properly, lets set up a welcome index page for our user in their blog (this could be anything, recipes, journal, etc. not just blog)</p> <p>Lets create a Blog model and controller:</p> <div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>rails g model Blog
<span class="gp">$ </span>rails g controller blogs
</code></pre></div> <p>Lets go into our User model created by our devise gem and our Blog model then set our associations. Our User model has many blogs and our blog model belongs to a user.</p> <p>Here is our User in <code class="highlighter-rouge">app/models/user.rb</code> :</p> <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
    <span class="n">has_many</span> <span class="ss">:blogs</span>

    <span class="c1"># Include default devise modules. Others available are:</span>
    <span class="c1"># :confirmable, :lockable, :timeoutable and :omniauthable</span>
    <span class="n">devise</span> <span class="ss">:database_authenticatable</span><span class="p">,</span> <span class="ss">:registerable</span><span class="p">,</span>
       <span class="ss">:recoverable</span><span class="p">,</span> <span class="ss">:rememberable</span><span class="p">,</span> <span class="ss">:trackable</span><span class="p">,</span> <span class="ss">:validatable</span>
<span class="k">end</span>
</code></pre></div> <p>Here is our Blog in <code class="highlighter-rouge">app/models/blog.rb</code> :</p> <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">Blog</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Base</span>
    <span class="n">belongs_to</span> <span class="ss">:user</span>
<span class="k">end</span>
</code></pre></div> <p>Our blog will have a title and a body. Lets set those in our migration <code class="highlighter-rouge">db/migrate/(date)_create_posts.rb</code> :</p> <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">CreateBlogs</span> <span class="o">&lt;</span> <span class="no">ActiveRecord</span><span class="o">::</span><span class="no">Migration</span>
  <span class="k">def</span> <span class="nf">change</span>
    <span class="n">create_table</span> <span class="ss">:blogs</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="o">|</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">belongs_to</span> <span class="ss">:user</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:title</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">string</span> <span class="ss">:body</span>
      <span class="n">t</span><span class="p">.</span><span class="nf">timestamps</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div> <p>Lets migrate :</p> <div class="language-shell highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>rake db:migrate
</code></pre></div> <p>This is where if we were to create a full blog, we would have all our RESTful methods here, but since that’s not our focus for this part, we’ll simply create a welcome index page with the user email displayed :</p> <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="k">class</span> <span class="nc">BlogsController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="c1"># before any blog action happens, it will authenticate the user</span>
  <span class="n">before_action</span> <span class="ss">:authenticate_user!</span>
  <span class="k">def</span> <span class="nf">index</span>
    <span class="vi">@user</span> <span class="o">=</span> <span class="n">current_user</span><span class="p">.</span><span class="nf">email</span>
  <span class="k">end</span>
  <span class="c1">#Other Restful methods show, new, edit, create, update, destroy</span>
<span class="k">end</span>
</code></pre></div> <p>We have to set routes in our configs folder :</p> <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">root</span> <span class="s1">'blogs#index'</span>

  <span class="n">devise_for</span> <span class="ss">:users</span>

  <span class="n">resources</span> <span class="ss">:users</span> <span class="k">do</span>
    <span class="n">resources</span> <span class="ss">:blogs</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div> <p>All we need is for our user to be able to see a page after they log in, since we have our index method in our controller, we need to edit our index blogs view :</p> <div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>Welcome !<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span><span class="err">&lt;</span>%= @user %&gt;<span class="nt">&lt;/p&gt;</span>
</code></pre></div> <p>Now when you log in, you should see your e-mail. Hopefully, you now know how to make a user and are able incorporate users in other works. Take this project and make this into anything you like. If you liked this tutorial, follow me for when I finish and publish Part II or bookmark this page and I’ll link it here. Thanks for reading!</p> <br> <a href="https://twitter.com/intent/tweet?text=http://localhost:4000/creating-simple-users-in-rails-with-devise-gem-tutorial/" class="btn btn_twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a> <a href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/creating-simple-users-in-rails-with-devise-gem-tutorial/" class="btn btn_facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a> <a href="https://plus.google.com/share?url=http://localhost:4000/creating-simple-users-in-rails-with-devise-gem-tutorial/" class="btn btn_google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a> <nav class="pagination"> <a href="http://localhost:4000/anyone-who-uses-terminal-on-macos-should-edit-their-bash_profile/" class="pagination_pager" title="Anyone Who Uses Terminal on MacOS, Should Edit Their .bash_profile ">previous</a> <a href="http://localhost:4000/clean-code-my-methods-and-reasons-on-writing-clear-and-concise-code/" class="pagination_pager" title="Clean Code — My Methods and Reasons on Writing Clear and Concise Code ">next</a> </nav> </div> </div> <!-- JS --> <script src="http://localhost:4000/assets/js/main.min.js"></script> <div class="overlay"> <ul class="projects-menu"> <li style="background:url(http://localhost:4000/images/whereto.png) center center no-repeat;"> <a href="https://github.com/SeeYouSpaceCowboy/yelp-search-reactjs" target="_blank" rel="nofollow external"> <span> WhereTo </span> </a> </li> <li style="background:url(http://localhost:4000/images/a-junior-dev.png) center center no-repeat;"> <a href="http://ajuniordev.herokuapp.com" target="_blank" rel="nofollow external"> <span> A Junior Dev - In Progress </span> </a> </li> <li style="background:url(http://localhost:4000/images/forhumans.jpg) center center no-repeat;"> <a href="http://forhumans.herokuapp.com" target="_blank" rel="nofollow external"> <span> For Humans </span> </a> </li> <li style="background:url(http://localhost:4000/images/smart-homework.jpg) center center no-repeat;"> <a href="https://play.google.com/store/apps/details?id=seeyouspacecowboy.smarthomework&hl=en" target="_blank" rel="nofollow external"> <span> Smart Homework </span> </a> </li> </ul> </div> </body> </html>
